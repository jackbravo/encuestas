Encuesta:
  actAs: [Timestampable]
  columns:
    id:
      type:         integer(4)
      primary:      true
      autoincrement: true
    encuestador_id: integer(4)

    # datos
    nombre:
      type:         string(255)
      notnull:      true
    apellido_p:     string(255)
    apellido_m:     string(255)
    rfc:            string(50)
    edad:           integer(4)
    genero:         string(1)
    telefono:       string(50)
    celular:        string(50)
    email:          string(255)

    # direccion
    estado_id:      integer(4)
    ciudad:         string(50)
    delegacion:     string(50)
    municipio:      string(50)
    colonia:        string(50)
    calle:          string(50)
    numero:         integer(4)
    cp:             integer(4)
  relations:
    Encuestador:
      class:        sfGuardUser
      local:        encuestador_id
      foreign:      id
      foreignAlias: Encuestas
    Estado:
      foreignAlias: Encuestas

    Horarios:
      class: Horario
      refClass: EncuestaHorario
      foreignAlias: Encuestas
    AreasInteres:
      class: AreaInteres
      refClass: EncuestaAreaInteres
      foreignAlias: Encuestas
    ProductosInteres:
      class: AreaInteres
      refClass: EncuestaProductoInteres
      foreignAlias: Encuestas
    MediosContacto:
      class: AreaInteres
      refClass: EncuestaMedioContacto
      foreignAlias: Encuestas

Estado:
  columns:
    id:
      type:         integer(4)
      primary:      true
      autoincrement: true
    nombre:
      type:         string(255)
      notnull:      true

Horario:
  columns:
    id:
      type:         integer(4)
      primary:      true
      autoincrement: true
    descripcion:    string(255)

EncuestaHorario:
  columns:
    encuesta_id: { type: integer(4), primary: true }
    horario_id: { type: integer(4), primary: true }
  relations:
    Encuesta:
      local: encuesta_id
      onDelete: CASCADE
    Horario:
      local: horario_id
      onDelete: CASCADE

AreaInteres:
  columns:
    id:
      type:         integer(4)
      primary:      true
      autoincrement: true
    descripcion:    string(255)

EncuestaAreaInteres:
  columns:
    encuesta_id: { type: integer(4), primary: true }
    area_interes_id: { type: integer(4), primary: true }
  relations:
    Encuesta:
      local: encuesta_id
      onDelete: CASCADE
    AreaInteres:
      local: area_interes_id
      onDelete: CASCADE

ProductoInteres:
  columns:
    id:
      type:         integer(4)
      primary:      true
      autoincrement: true
    descripcion:    string(255)

EncuestaProductoInteres:
  columns:
    encuesta_id: { type: integer(4), primary: true }
    producto_interes_id: { type: integer(4), primary: true }
  relations:
    Encuesta:
      local: encuesta_id
      onDelete: CASCADE
    ProductoInteres:
      local: producto_interes_id
      onDelete: CASCADE

MedioContacto:
  columns:
    id:
      type:         integer(4)
      primary:      true
      autoincrement: true
    descripcion:    string(255)

EncuestaMedioContacto:
  columns:
    encuesta_id: { type: integer(4), primary: true }
    medio_contacto_id: { type: integer(4), primary: true }
  relations:
    Encuesta:
      local: encuesta_id
      onDelete: CASCADE
    MedioContacto:
      local: medio_contacto_id
      onDelete: CASCADE

